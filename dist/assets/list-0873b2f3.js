import{P as k,r as l,j as e,c as j,d as E,z as F,au as O,D as L,H as $,B as w,T as C,a6 as H,C as W,L as B,R as M,p as D,a as _,h as K}from"./index-345a54fd.js";import{P as U}from"./Plus-2c210ce3.js";import{s as b}from"./index-96e7fc06.js";import{s as v}from"./index-ecc76830.js";import{a as G}from"./apply-pagination-03aa54c3.js";import{d as J}from"./deep-copy-ee95be26.js";import{B as N,a as Q}from"./breadcrumbs-separator-ac44ac1b.js";import{S as X}from"./seo-ea61f518.js";import{u as z}from"./use-page-view-43790c32.js";import{M as Y}from"./multi-select-b9e995e9.js";import{u as Z}from"./use-update-effect-d9f6f2b5.js";import{n as ee}from"./numeral-7a89f655.js";import{S as ae}from"./severity-pill-ad7a45ee.js";import{T as te,a as R,b as x,c as se}from"./TableRow-8f2ec0b0.js";import{T as ne}from"./TableHead-fa724656.js";import{L as re}from"./LinearProgress-95a71366.js";import{T as ie}from"./TablePagination-096da408.js";import{C as oe}from"./Card-15cadf45.js";import"./FormControlLabel-92a24307.js";import"./Checkbox-16ad3d4d.js";import"./SwitchBase-b75720f8.js";import"./KeyboardArrowRight-7b5ddf7b.js";const m=new Date,ce=[{id:"5ece2c077e39da27658aa8a9",attributes:["Healthcare"],category:"healthcare",createdAt:b(m,1).getTime(),currency:"$",image:"/assets/transactions/transaction-1.png",inStock:!0,isAvailable:!0,isShippable:!1,name:"Healthcare Erbology",price:23.99,quantity:85,sku:"401_1BBXBK",status:"approved",updatedAt:v(m,6).getTime(),variants:2},{id:"5ece2c0d16f70bff2cf86cd8",attributes:["Makeup"],category:"makeup",createdAt:b(m,3).getTime(),currency:"$",image:"/assets/transactions/transaction-2.png",inStock:!1,isAvailable:!1,isShippable:!0,name:"Makeup Lancome Rouge",price:95,quantity:0,sku:"978_UBFGJC",status:"approved",updatedAt:b(v(m,8),2).getTime(),variants:1},{id:"5ece2c123fad30cbbff8d060",attributes:["Variety of styles"],category:"jewelry",createdAt:b(m,6).getTime(),currency:"$",image:null,inStock:!0,isAvailable:!0,isShippable:!1,name:"Layering Bracelets Collection",price:155,quantity:48,sku:"211_QFEXJO",status:"pending",updatedAt:b(v(m,2),1).getTime(),variants:5},{id:"5ece2c1be7996d1549d94e34",attributes:["Skincare"],category:"skincare",createdAt:b(m,12).getTime(),currency:"$",image:"/assets/transactions/transaction-4.png",inStock:!0,isAvailable:!1,isShippable:!0,name:"Skincare Necessaire",price:17.99,quantity:5,sku:"321_UWEAJT",status:"approved",updatedAt:b(v(m,7),1).getTime(),variants:1},{id:"b393ce1b09c1254c3a92c827",attributes:["Skincare"],category:"skincare",createdAt:b(m,4).getTime(),currency:"$",image:"/assets/transactions/transaction-5.png",inStock:!0,isAvailable:!1,isShippable:!0,name:"Skincare Soja CO",price:65.99,quantity:10,sku:"592_LDKDI",status:"pending",updatedAt:b(v(m,1),1).getTime(),variants:1},{id:"a6ede15670da63f49f752c89",attributes:["Makeup"],category:"makeup",createdAt:b(m,6).getTime(),currency:"$",image:"/assets/transactions/transaction-6.png",inStock:!0,isAvailable:!1,isShippable:!0,name:"Makeup Lipstick",price:76.99,quantity:22,sku:"324_DKSEKD",status:"pending",updatedAt:b(v(m,3),3).getTime(),variants:1},{id:"bcad5524fe3a2f8f8620ceda",attributes:["Healthcare"],category:"healthcare",createdAt:b(m,7).getTime(),currency:"$",image:"/assets/transactions/transaction-7.png",inStock:!0,isAvailable:!1,isShippable:!0,name:"Healthcare Ritual",price:115.2,quantity:15,sku:"598_DOKEII",status:"approved",updatedAt:b(v(m,5),6).getTime(),variants:1}];class le{getTransactions(u={}){const{filters:i,page:f,rowsPerPage:o}=u;let t=J(ce),g=t.length;return typeof i<"u"&&(t=t.filter(n=>!(typeof i.name<"u"&&i.name!==""&&!n.name.toLowerCase().includes(i.name.toLowerCase())||typeof i.category<"u"&&i.category.length>0&&!i.category.includes(n.category)||typeof i.status<"u"&&i.status.length>0&&!i.status.includes(n.status)||typeof i.inStock<"u"&&!(n.inStock===i.inStock))),g=t.length),typeof f<"u"&&typeof o<"u"&&(t=G(t,f,o)),Promise.resolve({data:t,count:g})}}const ue=new le,de=[{label:"Healthcare",value:"healthcare"},{label:"Makeup",value:"makeup"},{label:"Dress",value:"dress"},{label:"Skincare",value:"skincare"},{label:"Jewelry",value:"jewelry"},{label:"Blouse",value:"blouse"}],q=[{label:"Approved",value:"approved"},{label:"Pending",value:"pending"}],I=d=>{const{onFiltersChange:u,...i}=d,f=l.useRef(null),[o,t]=l.useState([]),g=l.useCallback(()=>{const a={name:void 0,category:[],status:[],inStock:void 0};o.forEach(s=>{switch(s.field){case"name":a.name=s.value;break;case"status":a.status.push(s.value);break;case"inStock":a.inStock=s.value==="available";break}}),u==null||u(a)},[o,u]);Z(()=>{g()},[o,g]);const n=l.useCallback(a=>{t(s=>s.filter(p=>!(a.field===p.field&&a.value===p.value)))},[]),y=l.useCallback(a=>{var p;a.preventDefault();const s=((p=f.current)==null?void 0:p.value)||"";t(h=>{const r=h.find(c=>c.field==="name");if(r&&s)return h.map(c=>{var S;return c.field==="name"?{...c,value:((S=f.current)==null?void 0:S.value)||""}:c});if(r&&!s)return h.filter(c=>c.field!=="name");if(!r&&s){const c={label:"Name",field:"name",value:s};return[...h,c]}return h}),f.current&&(f.current.value="")},[]);l.useCallback(a=>{t(s=>{const p=[],h=s.filter(r=>{if(r.field!=="category")return!0;const c=a.includes(r.value);return c&&p.push(r.value),c});return a.length===p.length||a.forEach(r=>{if(!p.includes(r)){const c=de.find(S=>S.value===r);h.push({label:"Category",field:"category",value:r,displayValue:c.label})}}),h})},[]);const P=l.useCallback(a=>{t(s=>{const p=[],h=s.filter(r=>{if(r.field!=="status")return!0;const c=a.includes(r.value);return c&&p.push(r.value),c});return a.length===p.length||a.forEach(r=>{if(!p.includes(r)){const c=q.find(S=>S.value===r);h.push({label:"Status",field:"status",value:r,displayValue:c.label})}}),h})},[]);l.useCallback(a=>{t(s=>{const p=s.filter(r=>r.field!=="inStock");switch(a[a.length-1]){case"available":p.push({label:"Stock",field:"inStock",value:"available",displayValue:"Available"});break;case"outOfStock":p.push({label:"Stock",field:"inStock",value:"outOfStock",displayValue:"Out of Stock"});break}return p})},[]),l.useMemo(()=>o.filter(a=>a.field==="category").map(a=>a.value),[o]);const T=l.useMemo(()=>o.filter(a=>a.field==="status").map(a=>a.value),[o]);l.useMemo(()=>{const a=o.filter(s=>s.field==="inStock").map(s=>s.value);return a.length===0&&a.unshift("all"),a},[o]);const A=o.length>0;return e.jsxs("div",{...i,children:[e.jsxs(j,{alignItems:"center",component:"form",direction:"row",onSubmit:y,spacing:2,sx:{p:2},children:[e.jsx(E,{children:e.jsx(F,{})}),e.jsx(O,{defaultValue:"",disableUnderline:!0,fullWidth:!0,inputProps:{ref:f},placeholder:"Search by transaction name",sx:{flexGrow:1}})]}),e.jsx(L,{}),A?e.jsx(j,{alignItems:"center",direction:"row",flexWrap:"wrap",gap:1,sx:{p:2},children:o.map((a,s)=>e.jsx($,{label:e.jsx(w,{sx:{alignItems:"center",display:"flex","& span":{fontWeight:600}},children:e.jsxs(e.Fragment,{children:[e.jsx("span",{children:a.label}),": ",a.displayValue||a.value]})}),onDelete:()=>n(a),variant:"outlined"},s))}):e.jsx(w,{sx:{p:2.5},children:e.jsx(C,{color:"text.secondary",variant:"subtitle2",children:"No filters applied"})}),e.jsx(L,{}),e.jsx(j,{alignItems:"center",direction:"row",flexWrap:"wrap",spacing:1,sx:{p:1},children:e.jsx(Y,{label:"Status",onChange:P,options:q,value:T})})]})};I.propTypes={onFiltersChange:k.func};const V=d=>{const{count:u=0,items:i=[],onPageChange:f=()=>{},onRowsPerPageChange:o,page:t=0,rowsPerPage:g=0}=d;return e.jsxs("div",{children:[e.jsx(H,{children:e.jsxs(te,{sx:{minWidth:1200},children:[e.jsx(ne,{children:e.jsxs(R,{children:[e.jsx(x,{width:"25%",children:"Name"}),e.jsx(x,{width:"25%",children:"Stock"}),e.jsx(x,{children:"Price"}),e.jsx(x,{children:"sku"}),e.jsx(x,{children:"Status"})]})}),e.jsx(se,{children:i.map(n=>{const y=ee(n.price).format(`${n.currency}0,0.00`),P=n.quantity>=10?"success":"error",T=n.status==="approved"?"success":"info",A=n.variants>1;return e.jsx(l.Fragment,{children:e.jsxs(R,{hover:!0,children:[e.jsx(x,{width:"25%",children:e.jsx(w,{sx:{cursor:"pointer",ml:2},children:e.jsx(C,{variant:"subtitle2",children:n.name})})}),e.jsxs(x,{width:"25%",children:[e.jsx(re,{value:n.quantity,variant:"determinate",color:P,sx:{height:8,width:36}}),e.jsxs(C,{color:"text.secondary",variant:"body2",children:[n.quantity," in stock",A&&` in ${n.variants} variants`]})]}),e.jsx(x,{children:y}),e.jsx(x,{children:n.sku}),e.jsx(x,{children:e.jsx(ae,{color:T,children:n.status})})]},n.id)},n.id)})})]})}),e.jsx(ie,{component:"div",count:u,onPageChange:f,onRowsPerPageChange:o,page:t,rowsPerPage:g,rowsPerPageOptions:[5,10,25]})]})};V.propTypes={count:k.number,items:k.array,onPageChange:k.func,onRowsPerPageChange:k.func,page:k.number,rowsPerPage:k.number};const pe=()=>{const[d,u]=l.useState({filters:{name:void 0,category:[],status:[],inStock:void 0},page:0,rowsPerPage:5}),i=l.useCallback(t=>{u(g=>({...g,filters:t}))},[]),f=l.useCallback((t,g)=>{u(n=>({...n,page:g}))},[]),o=l.useCallback(t=>{u(g=>({...g,rowsPerPage:parseInt(t.target.value,10)}))},[]);return{handleFiltersChange:i,handlePageChange:f,handleRowsPerPageChange:o,state:d}},fe=d=>{const u=K(),[i,f]=l.useState({transactions:[],transactionsCount:0}),o=l.useCallback(async()=>{try{const t=await ue.getTransactions(d);u()&&f({transactions:t.data,transactionsCount:t.count})}catch(t){console.error(t)}},[d,u]);return l.useEffect(()=>{o()},[d]),{...i}},Ie=()=>{const d=pe(),u=fe(d.state);return z(),e.jsxs(e.Fragment,{children:[e.jsx(X,{title:"Dashboard:  Transaction List"}),e.jsx(w,{component:"main",sx:{flexGrow:1,py:8},children:e.jsx(W,{maxWidth:"xl",children:e.jsxs(j,{spacing:4,children:[e.jsxs(j,{direction:"row",justifyContent:"space-between",spacing:4,children:[e.jsxs(j,{spacing:1,children:[e.jsx(C,{variant:"h4",children:" Transactions"}),e.jsxs(N,{separator:e.jsx(Q,{}),children:[e.jsx(B,{color:"text.primary",component:M,href:D.dashboard.index,variant:"subtitle2",children:"Dashboard"}),e.jsx(B,{color:"text.primary",component:M,href:D.dashboard.transactions.index,variant:"subtitle2",children:"Transactions"}),e.jsx(C,{color:"text.secondary",variant:"subtitle2",children:"List"})]})]}),e.jsx(j,{alignItems:"center",direction:"row",spacing:3,children:e.jsx(_,{component:M,href:D.dashboard.transactions.create,startIcon:e.jsx(E,{children:e.jsx(U,{})}),variant:"contained",children:"Add"})})]}),e.jsxs(oe,{children:[e.jsx(I,{onFiltersChange:d.handleFiltersChange}),e.jsx(V,{onPageChange:d.handlePageChange,onRowsPerPageChange:d.handleRowsPerPageChange,page:d.state.page,items:u.transactions,count:u.transactionsCount,rowsPerPage:d.state.rowsPerPage})]})]})})})]})};export{Ie as default};
