import{P as f,j as e,c as n,B as x,T as h,a as d,v as B,p as M,t as w,G as c,aI as O,d as S,A as H,bH as F,e as g,a6 as N,E as V,r as p,C as W,D as q}from"./index-345a54fd.js";import{S as Y}from"./seo-ea61f518.js";import{u as U}from"./use-page-view-43790c32.js";import{C as $}from"./Camera01-3f407031.js";import{n as J}from"./numeral-7a89f655.js";import{P as K,a as i}from"./property-list-item-b239a2fb.js";import{C as j}from"./Card-15cadf45.js";import{C as b}from"./CardContent-ad559ce1.js";import{C as I}from"./CardHeader-06bf02fa.js";import{T as L,a as v,b as s,c as E}from"./TableRow-8f2ec0b0.js";import{T as G}from"./TableHead-fa724656.js";import{a as Q}from"./data-ada0f0b8.js";import{l as X}from"./index-7ffecf5e.js";import{T as Z,a as ee}from"./Tabs-f33c10ba.js";import{s as T}from"./index-96e7fc06.js";import{s as A}from"./index-ecc76830.js";import{s as z}from"./index-71286f46.js";import"./ListItem-1cf25ad9.js";import"./axios-instance-67182a36.js";import"./index-078e6bc2.js";import"./deep-copy-ee95be26.js";import"./apply-pagination-03aa54c3.js";import"./apply-sort-95de74ec.js";import"./KeyboardArrowRight-7b5ddf7b.js";const P=l=>{const{user:r,loans:t=[]}=l;return e.jsxs(n,{spacing:4,...l,children:[e.jsx(j,{children:e.jsxs(b,{sx:{pt:0},children:[e.jsx(x,{sx:{alignItems:"center",display:"flex",justifyContent:"space-between",marginTop:2},children:e.jsx(h,{variant:"h6",children:"Details"})}),e.jsx(x,{sx:{border:1,borderColor:"divider",borderRadius:1,mt:3},children:e.jsxs(K,{children:[e.jsx(i,{align:"horizontal",divider:!0,label:"ID",value:r.id}),e.jsx(i,{align:"horizontal",divider:!0,label:"username",value:r.username}),e.jsx(i,{align:"horizontal",divider:!0,label:"Email",value:r.email}),e.jsx(i,{align:"horizontal",divider:!0,label:"Card number",value:r.financial_information}),e.jsx(i,{align:"horizontal",divider:!0,label:"Address",value:r.address}),e.jsx(i,{align:"horizontal",divider:!0,label:"First name",value:r.first_name}),e.jsx(i,{align:"horizontal",divider:!0,label:"Phone",value:r.telephone}),e.jsx(i,{align:"horizontal",divider:!0,label:"Surname",value:r.surname}),e.jsx(i,{align:"horizontal",divider:!0,label:"Gaurantor Primary",value:r.guarantors[0]}),e.jsx(i,{align:"horizontal",divider:!0,label:"Gaurantor Secondary",value:r.guarantors[1]}),e.jsx(i,{align:"horizontal",divider:!0,label:"Last Login",value:r.last_login}),e.jsx(i,{align:"horizontal",divider:!0,label:"Last Login",value:r.last_login})]})})]})}),e.jsxs(j,{children:[e.jsx(I,{title:"Loan history",subheader:"You can view and download all your previous loans here. If youâ€™ve just made a payment, it may take a few hours for it to appear in the table below."}),e.jsxs(L,{children:[e.jsx(G,{children:e.jsxs(v,{children:[e.jsx(s,{children:"Date"}),e.jsx(s,{children:"Total"}),e.jsx(s,{children:"Billing cyle"}),e.jsx(s,{children:"Interest"}),e.jsx(s,{children:"Status"}),e.jsx(s,{})]})}),e.jsx(E,{children:t.map(a=>{const u=new Date(a.application_time).toLocaleDateString(),m=J(a.amount_payable).format("$0,0.00");return e.jsxs(v,{children:[e.jsx(s,{children:u}),e.jsx(s,{children:m}),e.jsx(s,{children:a.amount_payable}),e.jsx(s,{children:a.interest}),e.jsx(s,{children:a.loan_status}),e.jsx(s,{align:"right",children:e.jsx(d,{component:B,to:M.dashboard.loans.details,children:"View Loan"})})]},a.id)})})]})]})]})};P.propTypes={plan:f.string,loans:f.array};const re=l=>{const{user:r,loans:t}=l,[a,u]=w.useState(!0),[m,o]=w.useState(!0),y=a?e.jsx(d,{color:"inherit",size:"small",onClick:()=>u(!1),children:"Edit"}):e.jsx(d,{color:"inherit",size:"small",onClick:()=>u(!0),children:"Save"}),R=m?e.jsx(d,{color:"inherit",size:"small",onClick:()=>o(!1),children:"Edit"}):e.jsx(d,{color:"inherit",size:"small",onClick:()=>o(!0),children:"Save"}),C=r.first_name+" "+r.surname;return e.jsxs(n,{spacing:4,...l,children:[e.jsx(j,{children:e.jsx(b,{children:e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(c,{xs:12,md:4,children:e.jsx(h,{variant:"h6",children:"Basic details"})}),e.jsx(c,{xs:12,md:8,children:e.jsxs(n,{spacing:3,children:[e.jsxs(n,{alignItems:"center",direction:"row",spacing:2,children:[e.jsx(x,{sx:{borderColor:"neutral.300",borderRadius:"50%",borderStyle:"dashed",borderWidth:1,p:"4px"},children:e.jsxs(x,{sx:{borderRadius:"50%",height:"100%",width:"100%",position:"relative"},children:[e.jsx(x,{sx:{alignItems:"center",backgroundColor:_=>O(_.palette.neutral[700],.5),borderRadius:"50%",color:"common.white",cursor:"pointer",display:"flex",height:"100%",justifyContent:"center",left:0,opacity:0,position:"absolute",top:0,width:"100%",zIndex:1,"&:hover":{opacity:1}},children:e.jsxs(n,{alignItems:"center",direction:"row",spacing:1,children:[e.jsx(S,{color:"inherit",children:e.jsx($,{})}),e.jsx(h,{color:"inherit",variant:"subtitle2",sx:{fontWeight:700},children:"Select"})]})}),e.jsx(H,{src:"",sx:{height:100,width:100},children:e.jsx(S,{children:e.jsx(F,{})})})]})}),e.jsxs(x,{children:[e.jsx(d,{color:"inherit",size:"small",children:r.email}),e.jsx(d,{color:"inherit",size:"small",children:C})]})]}),e.jsxs(n,{alignItems:"center",direction:"row",spacing:2,children:[e.jsx(g,{defaultValue:C,label:"Full Name",sx:{flexGrow:1}}),R]}),e.jsxs(n,{alignItems:"center",direction:"row",spacing:2,children:[e.jsx(g,{defaultValue:r.email,disabled:a,label:"Email Address",required:!0,sx:{flexGrow:1,"& .MuiOutlinedInput-notchedOutline":{borderStyle:"dashed"}}}),y]})]})})]})})}),e.jsx(P,{user:r,loans:t.slice(0,3)}),e.jsx(j,{children:e.jsx(b,{children:e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(c,{xs:12,md:4,children:e.jsx(h,{variant:"h6",children:"Deactivate Account"})}),e.jsx(c,{xs:12,md:8,children:e.jsxs(n,{alignItems:"flex-start",spacing:3,children:[e.jsx(h,{variant:"subtitle1",children:"Deactivate your account and all of your source data."}),e.jsx(d,{color:"error",variant:"outlined",children:"Deactivate account"})]})})]})})})]})},k=l=>{const{loginEvents:r}=l;return e.jsxs(n,{spacing:4,children:[e.jsx(j,{children:e.jsx(b,{children:e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(c,{xs:12,md:4,children:e.jsx(h,{variant:"h6",children:"Change password"})}),e.jsx(c,{xs:12,sm:12,md:8,children:e.jsxs(n,{spacing:2,children:[e.jsx(g,{label:"Current Password",type:"password",sx:{flexGrow:1,"& .MuiOutlinedInput-notchedOutline":{borderStyle:"dotted"}}}),e.jsx(g,{label:"New Password",type:"password",sx:{flexGrow:1,"& .MuiOutlinedInput-notchedOutline":{borderStyle:"dotted"}}}),e.jsx(x,{children:e.jsx(d,{variant:"contained",children:"Save"})})]})})]})})}),e.jsxs(j,{children:[e.jsx(I,{title:"Login history",subheader:"Your recent login activity"}),e.jsx(N,{children:e.jsxs(L,{sx:{minWidth:500},children:[e.jsx(G,{children:e.jsxs(v,{children:[e.jsx(s,{children:"Login type"}),e.jsx(s,{children:"IP Address"}),e.jsx(s,{children:"Client"})]})}),e.jsx(E,{children:r.map(t=>{const a=V(t.createdAt,"HH:mm a MM/dd/yyyy");return e.jsxs(v,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[e.jsxs(s,{children:[e.jsx(h,{variant:"subtitle2",children:t.type}),e.jsxs(h,{variant:"body2",color:"body2",children:["on ",a]})]}),e.jsx(s,{children:t.ip}),e.jsx(s,{children:t.userAgent})]},t.id)})})]})})]})]})};k.propTypes={loginEvents:f.array.isRequired};const D=new Date,se=[{label:"General",value:"general"},{label:"Security",value:"security"}],ze=()=>{const l=Q(1)[0],[r,t]=p.useState("general"),a=p.useRef([]),u=p.useCallback(async()=>{const o=await X.getLoans();a.current=o.data},[]);p.useEffect(()=>{u()},[u]),U();const m=p.useCallback((o,y)=>{t(y)},[]);return e.jsxs(e.Fragment,{children:[e.jsx(Y,{title:"Dashboard: Account"}),e.jsx(x,{component:"main",sx:{flexGrow:1,py:8},children:e.jsxs(W,{maxWidth:"xl",children:[e.jsxs(n,{spacing:3,sx:{mb:3},children:[e.jsx(h,{variant:"h4",children:"Account"}),e.jsxs("div",{children:[e.jsx(Z,{indicatorColor:"primary",onChange:m,scrollButtons:"auto",textColor:"primary",value:r,variant:"scrollable",children:se.map(o=>e.jsx(ee,{label:o.label,value:o.value},o.value))}),e.jsx(q,{})]})]}),r==="general"&&e.jsx(e.Fragment,{children:e.jsx(re,{user:l,loans:a.current})}),r==="security"&&e.jsx(k,{loginEvents:[{id:"1bd6d44321cb78fd915462fa",createdAt:T(A(z(D,5),7),1).getTime(),ip:"95.130.17.84",type:"Credential login",userAgent:"Chrome, Mac OS 10.15.7"},{id:"bde169c2fe9adea5d4598ea9",createdAt:T(A(z(D,25),9),1).getTime(),ip:"95.130.17.84",type:"Credential login",userAgent:"Chrome, Mac OS 10.15.7"}]})]})})]})};export{ze as default};
