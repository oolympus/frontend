import{h as x,i as g,k as f,j as r,T as b,L as j,R as v,p as l,c as C,e as s,F,b as S,l as i,a as y}from"./index-345a54fd.js";import{c as q,a,u as B}from"./formik.esm-df7192cb.js";import{S as R}from"./seo-ea61f518.js";import{u as T}from"./use-page-view-43790c32.js";import{u as M}from"./use-search-params-d91f4e53.js";import{C as _}from"./Card-15cadf45.js";import{C as P}from"./CardHeader-06bf02fa.js";import{C as k}from"./CardContent-ad559ce1.js";import{R as L}from"./RadioGroup-412c8c65.js";import{F as d}from"./FormControlLabel-92a24307.js";import{R as u}from"./Radio-fb4dc7b8.js";import"./FormGroup-02f8bfda.js";import"./SwitchBase-b75720f8.js";const W={email:"",first_name:"",surname:"",gender:"M",address:"",telephone:""},w=q({email:a().email("Must be a valid email").max(255).required("Email is required"),first_name:a().max(255).required("First Name is required"),phone:a().matches(/^256(78|77|76)\d{7}$/,"Must be a valid Ugandan phone number").required("Phone is required"),surname:a().max(255).required("Surname is required"),address:a().min(2,"Address is required"),gender:a().oneOf(["M","F"]).required("Gender is required")}),Q=()=>{const o=x(),m=g(),h=M().get("returnTo"),{signUp:c}=f(),e=B({initialValues:W,validationSchema:w,onSubmit:async(p,t)=>{console.log("mounted");try{await c({...p}),o()&&m.push(h||l.dashboard.index)}catch(n){console.error(n),o()&&(t.setStatus({success:!1}),t.setErrors({address:n.message}),t.setSubmitting(!1))}}});return T(),r.jsxs(r.Fragment,{children:[r.jsx(R,{title:"Register"}),r.jsx("div",{children:r.jsxs(_,{elevation:16,children:[r.jsx(P,{subheader:r.jsxs(b,{color:"text.secondary",variant:"body2",children:["Already have an account? Â ",r.jsx(j,{component:v,href:l.auth.login,underline:"hover",variant:"subtitle2",children:"Log in"})]}),sx:{pb:0},title:"Register"}),r.jsx(k,{children:r.jsxs("form",{noValidate:!0,onSubmit:e.handleSubmit,children:[r.jsxs(C,{spacing:3,children:[r.jsx(s,{error:!!(e.touched.first_name&&e.errors.first_name),fullWidth:!0,helperText:e.touched.first_name&&e.errors.first_name,label:"First Name",name:"first_name",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.first_name}),r.jsx(s,{error:!!(e.touched.surname&&e.errors.surname),fullWidth:!0,helperText:e.touched.surname&&e.errors.surname,label:"Surname",name:"surname",onBlur:e.handleBlur,onChange:e.handleChange,value:e.values.surname}),r.jsx(s,{error:!!(e.touched.email&&e.errors.email),fullWidth:!0,helperText:e.touched.email&&e.errors.email,label:"Email",name:"email",onBlur:e.handleBlur,onChange:e.handleChange,type:"email",value:e.values.email}),r.jsx(s,{error:!!(e.touched.telephone&&e.errors.telephone),fullWidth:!0,helperText:e.touched.telephone&&e.errors.telephone,label:"Phone",name:"telephone",onBlur:e.handleBlur,onChange:e.handleChange,type:"tel",value:e.values.telephone}),r.jsx(s,{error:!!(e.touched.address&&e.errors.address),fullWidth:!0,helperText:e.touched.address&&e.errors.address,label:"Address",name:"address",onBlur:e.handleBlur,onChange:e.handleChange,type:"text",value:e.values.address}),r.jsxs(F,{children:[r.jsx(S,{id:"demo-row-radio-buttons-group-label",children:"Select Gender"}),r.jsxs(L,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"gender",defaultValue:"M",value:e.values.gender,onChange:e.handleChange,children:[r.jsx(d,{value:"F",control:r.jsx(u,{}),label:"Male"}),r.jsx(d,{value:"M",control:r.jsx(u,{}),label:"Female"})]})]})]}),!!(e.touched.gender&&e.errors.gender)&&r.jsx(i,{error:!0,children:e.errors.gender}),e.errors.address&&r.jsx(i,{error:!0,sx:{mt:3},children:e.errors.address}),r.jsx(y,{disabled:e.isSubmitting,fullWidth:!0,size:"large",sx:{mt:2},type:"submit",variant:"contained",children:"Register"})]})})]})})]})};export{Q as default};
