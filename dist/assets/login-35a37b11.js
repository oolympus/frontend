import{h as f,i as b,k as w,j as s,T as j,L as d,R as m,p as t,c as l,e as c,l as v,a as S}from"./index-345a54fd.js";import{c as C,a as h,u as P}from"./formik.esm-df7192cb.js";import{S as y}from"./seo-ea61f518.js";import{u as T}from"./use-page-view-43790c32.js";import{u as k}from"./use-search-params-d91f4e53.js";import{a as F}from"./axios-instance-67182a36.js";import{C as L}from"./Card-15cadf45.js";import{C as R}from"./CardHeader-06bf02fa.js";import{C as B}from"./CardContent-ad559ce1.js";const q="accessToken",E={username:"demo@olympus.com",password:"Password123!",submit:null},I=C({username:h().max(255).required("Username is required"),password:h().min(3,"Password must be at least 3 characters").max(255).required("Password is required")}),K=()=>{const o=f(),p=b(),x=k().get("returnTo"),{signIn:g}=w(),e=P({initialValues:E,validationSchema:I,onSubmit:async(n,r)=>{var i;try{await g({...n});const u=await F().post("/login",{...n});if(!((i=u.data)!=null&&i.token))return;window.sessionStorage.setItem(q,u.data.token),o()&&p.push(x||t.dashboard.index)}catch(a){console.error(a),o()&&(r.setStatus({success:!1}),r.setErrors({submit:a.message}),r.setSubmitting(!1))}}});return T(),s.jsxs(s.Fragment,{children:[s.jsx(y,{title:"Login"}),s.jsx("div",{children:s.jsxs(L,{elevation:16,children:[s.jsx(R,{subheader:s.jsxs(j,{color:"text.secondary",variant:"body2",children:["Don't have an account? Â ",s.jsx(d,{component:m,href:t.auth.register,underline:"hover",variant:"subtitle2",children:"Register"})]}),sx:{pb:0},title:"Log in"}),s.jsx(B,{children:s.jsxs("form",{noValidate:!0,onSubmit:e.handleSubmit,children:[s.jsxs(l,{spacing:3,children:[s.jsx(c,{autoFocus:!0,error:!!(e.touched.username&&e.errors.username),fullWidth:!0,helperText:e.touched.username&&e.errors.username,label:"Username",name:"username",onBlur:e.handleBlur,onChange:e.handleChange,type:"text",value:e.values.username}),s.jsx(c,{error:!!(e.touched.password&&e.errors.password),fullWidth:!0,helperText:e.touched.password&&e.errors.password,label:"Password",name:"password",onBlur:e.handleBlur,onChange:e.handleChange,type:"password",value:e.values.password})]}),e.errors.submit&&s.jsx(v,{error:!0,sx:{mt:3},children:e.errors.submit}),s.jsx(l,{sx:{mt:2},children:s.jsx(d,{component:m,href:t.auth.forgotPassword,underline:"hover",variant:"subtitle2",children:"Forgot Password"})}),s.jsx(S,{disabled:e.isSubmitting,fullWidth:!0,size:"large",sx:{mt:2},type:"submit",variant:"contained",children:"Log In"})]})})]})})]})};export{K as default};
