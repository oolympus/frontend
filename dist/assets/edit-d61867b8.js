import{P as C,a7 as b,a8 as x,j as e,G as n,e as m,c as a,a as p,R as f,p as j,B as v,C as S,L as w,d as y,T as u,A as B,H as q,h as E,r as c}from"./index-345a54fd.js";import{A as N}from"./ArrowLeft-2135ffd4.js";import{c as T}from"./index-a56853d9.js";import{S as A}from"./seo-ea61f518.js";import{u as k}from"./use-page-view-43790c32.js";import{u as I,c as W,a as o}from"./formik.esm-df7192cb.js";import{C as F}from"./Card-15cadf45.js";import{C as P}from"./CardHeader-06bf02fa.js";import{C as _}from"./CardContent-ad559ce1.js";import{g as G}from"./get-initials-d1c6cec7.js";import"./apply-pagination-03aa54c3.js";import"./apply-sort-95de74ec.js";import"./deep-copy-ee95be26.js";import"./data-ada0f0b8.js";import"./axios-instance-67182a36.js";import"./index-96e7fc06.js";import"./index-ecc76830.js";import"./index-71286f46.js";import"./index-078e6bc2.js";const g=s=>{const{customer:t,...d}=s,r=I({initialValues:{address:t.address||"",email:t.email||"",isActive:t.is_active||!1,firstName:t.first_name||"",surname:t.surname||"",telephone:t.telephone||"",submit:null},validationSchema:W({address:o().max(255),email:o().email("Must be a valid email").max(255).required("Email is required"),firstName:o().max(255).required("firstName is required"),surname:o().max(255).required("surname is required"),telephone:o().max(15)}),onSubmit:async(l,i)=>{try{await b(500),i.setStatus({success:!0}),i.setSubmitting(!1),x.success("Customer updated")}catch(h){console.error(h),x.error("Something went wrong!"),i.setStatus({success:!1}),i.setErrors({submit:h.message}),i.setSubmitting(!1)}}});return e.jsx("form",{onSubmit:r.handleSubmit,...d,children:e.jsxs(F,{children:[e.jsx(P,{title:"Edit Customer"}),e.jsx(_,{sx:{pt:0},children:e.jsxs(n,{container:!0,spacing:3,children:[e.jsx(n,{xs:12,md:6,children:e.jsx(m,{error:!!(r.touched.firstName&&r.errors.firstName),fullWidth:!0,helperText:r.touched.firstName&&r.errors.firstName,label:"Full name",name:"name",onBlur:r.handleBlur,onChange:r.handleChange,required:!0,value:r.values.firstName})}),e.jsx(n,{xs:12,md:6,children:e.jsx(m,{error:!!(r.touched.email&&r.errors.email),fullWidth:!0,helperText:r.touched.email&&r.errors.email,label:"Email address",name:"email",onBlur:r.handleBlur,onChange:r.handleChange,required:!0,value:r.values.email})}),e.jsx(n,{md:6,xs:12,children:e.jsx(m,{error:!!(r.touched.address&&r.errors.address),fullWidth:!0,label:"Address",name:"address",onBlur:r.handleBlur,onChange:r.handleChange,value:r.values.address})}),e.jsx(n,{xs:12,md:6,children:e.jsx(m,{error:!!(r.touched.telephone&&r.errors.telephone),fullWidth:!0,helperText:r.touched.telephone&&r.errors.telephone,label:"Phone number",name:"phone",onBlur:r.handleBlur,onChange:r.handleChange,value:r.values.telephone})})]})}),e.jsxs(a,{direction:{xs:"column",sm:"row"},flexWrap:"wrap",spacing:3,sx:{p:3},children:[e.jsx(p,{disabled:r.isSubmitting,type:"submit",variant:"contained",children:"Update"}),e.jsx(p,{color:"error",variant:"outlined",component:f,disabled:r.isSubmitting,href:j.dashboard.customers.details,children:"Cancel"})]})]})})};g.propTypes={customer:C.object.isRequired};const L=()=>{const s=E(),[t,d]=c.useState(null),r=c.useCallback(async()=>{try{const l=await T.getCustomer();s()&&d(l)}catch(l){console.error(l)}},[s]);return c.useEffect(()=>{r()},[]),t},ae=()=>{const s=L();return k(),s?e.jsxs(e.Fragment,{children:[e.jsx(A,{title:"Dashboard: Customer Edit"}),e.jsx(v,{component:"main",sx:{flexGrow:1,py:8},children:e.jsx(S,{maxWidth:"lg",children:e.jsxs(a,{spacing:4,children:[e.jsxs(a,{spacing:4,children:[e.jsx("div",{children:e.jsxs(w,{color:"text.primary",component:f,href:j.dashboard.customers.index,sx:{alignItems:"center",display:"inline-flex"},underline:"hover",children:[e.jsx(y,{sx:{mr:1},children:e.jsx(N,{})}),e.jsx(u,{variant:"subtitle2",children:"Customers"})]})}),e.jsx(a,{alignItems:"flex-start",direction:{xs:"column",md:"row"},justifyContent:"space-between",spacing:4,children:e.jsxs(a,{alignItems:"center",direction:"row",spacing:2,children:[e.jsx(B,{src:"",sx:{height:64,width:64},children:G(`${s.first_name} ${s.surname}`)}),e.jsxs(a,{spacing:1,children:[e.jsx(u,{variant:"h4",children:s.email}),e.jsxs(a,{alignItems:"center",direction:"row",spacing:1,children:[e.jsx(u,{variant:"subtitle2",children:"user_id:"}),e.jsx(q,{label:s.id,size:"small"})]})]})]})})]}),e.jsx(g,{customer:s})]})})})]}):null};export{ae as default};
