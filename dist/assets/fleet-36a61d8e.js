import{P as p,j as a,aa as oe,c as w,T as v,Y as $,d as V,a9 as re,r as c,aJ as ie,A as se,av as ae,D as I,B as b,aK as Q,aL as le,x as ce,aM as B,aN as de,u as ue}from"./index-3a7c6a81.js";import{S as fe}from"./seo-63bf6bf4.js";import{T as me}from"./Truck02-e14b6a66.js";import{L as he}from"./LinearProgress-249c51e3.js";import{T as pe,t as ge,a as k,b as z,c as D,d as U,e as P}from"./TimelineSeparator-ad7c05da.js";import{C as ve}from"./Card-43e5e905.js";const J=e=>{const{children:t,container:n,open:r,onClose:o}=e;return a.jsxs(oe,{anchor:"left",hideBackdrop:!0,ModalProps:{container:n,sx:{pointerEvents:"none",position:"absolute"}},onClose:o,open:r,PaperProps:{sx:{pointerEvents:"auto",position:"absolute"}},SlideProps:{container:n},variant:"temporary",children:[a.jsxs(w,{alignItems:"flex-center",direction:"row",justifyContent:"space-between",sx:{p:2},children:[a.jsx(v,{variant:"h5",children:"Fleet"}),a.jsx($,{onClick:o,children:a.jsx(V,{children:a.jsx(re,{})})})]}),t]})};J.propTypes={children:p.node,container:p.any,onClose:p.func,open:p.bool};const X=e=>{const{onDeselect:t,onSelect:n,selected:r,vehicle:o}=e,i=c.useCallback(()=>{r?t==null||t():n==null||n(o.id)},[t,n,r,o]);return a.jsxs(w,{component:"li",children:[a.jsxs(ie,{sx:{alignItems:"center",justifyContent:"flex-start",p:2,textAlign:"left",width:"100%"},onClick:i,children:[a.jsx(se,{sx:{mr:2},children:a.jsx(V,{children:a.jsx(me,{})})}),a.jsxs("div",{children:[a.jsx(v,{children:o.id}),a.jsx(v,{color:"text.secondary",variant:"body2",children:o.location})]})]}),a.jsxs(ae,{in:r,children:[a.jsx(I,{}),a.jsxs(b,{sx:{p:2},children:[a.jsxs(w,{spacing:1,children:[a.jsx(v,{color:"text.secondary",variant:"caption",children:"Temperature (good)"}),a.jsxs(w,{alignItems:"center",direction:"row",spacing:2,children:[a.jsx(he,{value:8,sx:{flexGrow:1},variant:"determinate"}),a.jsx(v,{color:"text.secondary",variant:"body2",children:o.temp})]})]}),a.jsxs(pe,{position:"right",sx:{px:3,[`& .${ge.root}:before`]:{flex:0,padding:0}},children:[a.jsxs(k,{children:[a.jsxs(z,{children:[a.jsx(D,{color:"primary"}),a.jsx(U,{})]}),a.jsx(P,{children:a.jsxs("div",{children:[a.jsx(v,{variant:"body2",children:"Tracking Number Created"}),a.jsx(v,{color:"text.secondary",variant:"caption",children:o.startedAt})]})})]}),a.jsxs(k,{children:[a.jsxs(z,{children:[a.jsx(D,{color:"primary"}),a.jsx(U,{})]}),a.jsx(P,{children:a.jsxs("div",{children:[a.jsx(v,{variant:"body2",children:"Out for Delivery"}),a.jsx(v,{color:"text.secondary",variant:"caption",children:o.departedAt})]})})]}),a.jsxs(k,{children:[a.jsx(z,{children:a.jsx(D,{color:"primary"})}),a.jsx(P,{children:a.jsxs("div",{children:[a.jsx(v,{variant:"body2",children:"Arrived"}),a.jsx(v,{color:"text.secondary",variant:"caption",children:o.arrivedAt})]})})]})]})]})]})]})};X.propTypes={onDeselect:p.func,onSelect:p.func,selected:p.bool,vehicle:p.object.isRequired};const N=e=>{const{onVehicleDeselect:t,onVehicleSelect:n,currentVehicleId:r,vehicles:o=[]}=e;return a.jsx(w,{component:"ul",divider:a.jsx(I,{}),sx:{borderBottomColor:"divider",borderBottomStyle:"solid",borderBottomWidth:1,listStyle:"none",m:0,p:0},children:o.map(i=>{const s=r?r===i.id:!1;return a.jsx(X,{onDeselect:t,onSelect:n,selected:s,vehicle:i},i.id)})})};N.propTypes={currentVehicleId:p.string,onVehicleDeselect:p.func,onVehicleSelect:p.func,vehicles:p.array};const xe=c.createContext(null);function ye(e){const t=e.clone();return t.pixelsToGLUnits=e.pixelsToGLUnits,t}function Z(e){return{longitude:e.center.lng,latitude:e.center.lat,zoom:e.zoom,pitch:e.pitch,bearing:e.bearing,padding:e.padding}}function H(e,t){const n=t.viewState||t;let r=!1;if("longitude"in n&&"latitude"in n){const o=e.center;e.center=new o.constructor(n.longitude,n.latitude),r=r||o!==e.center}if("zoom"in n){const o=e.zoom;e.zoom=n.zoom,r=r||o!==e.zoom}if("bearing"in n){const o=e.bearing;e.bearing=n.bearing,r=r||o!==e.bearing}if("pitch"in n){const o=e.pitch;e.pitch=n.pitch,r=r||o!==e.pitch}return n.padding&&!e.isPaddingEqual(n.padding)&&(r=!0,e.padding=n.padding),r}const _e=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function W(e){if(!e)return null;if(typeof e=="string"||("toJS"in e&&(e=e.toJS()),!e.layers))return e;const t={};for(const r of e.layers)t[r.id]=r;const n=e.layers.map(r=>{let o=null;"interactive"in r&&(o=Object.assign({},r),delete o.interactive);const i=t[r.ref];if(i){o=o||Object.assign({},r),delete o.ref;for(const s of _e)s in i&&(o[s]=i[s])}return o||r});return{...e,layers:n}}function be(e,t){const n=Array.isArray(e)?e[0]:e?e.x:0,r=Array.isArray(e)?e[1]:e?e.y:0,o=Array.isArray(t)?t[0]:t?t.x:0,i=Array.isArray(t)?t[1]:t?t.y:0;return n===o&&r===i}function j(e,t){if(e===t)return!0;if(!e||!t)return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!j(e[n],t[n]))return!1;return!0}else if(Array.isArray(t))return!1;if(typeof e=="object"&&typeof t=="object"){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const o of n)if(!t.hasOwnProperty(o)||!j(e[o],t[o]))return!1;return!0}return!1}const q={version:8,sources:{},layers:[]},Y={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},O={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},G={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Ce=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],Se=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class M{constructor(t,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=o=>{const i=this.props[G[o.type]];i?i(o):o.type==="error"&&console.error(o.error)},this._onPointerEvent=o=>{(o.type==="mousemove"||o.type==="mouseout")&&this._updateHover(o);const i=this.props[Y[o.type]];i&&(this.props.interactiveLayerIds&&o.type!=="mouseover"&&o.type!=="mouseout"&&(o.features=this._hoveredFeatures||this._queryRenderedFeatures(o.point)),i(o),delete o.features)},this._onCameraEvent=o=>{if(!this._internalUpdate){const i=this.props[O[o.type]];i&&i(o)}o.type in this._deferredEvents&&(this._deferredEvents[o.type]=!1)},this._MapClass=t,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){const n=this.props;this.props=t;const r=this._updateSettings(t,n);r&&this._createShadowTransform(this._map);const o=this._updateSize(t),i=this._updateViewState(t,!0);this._updateStyle(t,n),this._updateStyleComponents(t,n),this._updateHandlers(t,n),(r||o||i&&!this._map.isMoving())&&this.redraw()}static reuse(t,n){const r=M.savedMaps.pop();if(!r)return null;const o=r.map,i=o.getContainer();for(n.className=i.className;i.childNodes.length>0;)n.appendChild(i.childNodes[0]);o._container=n;const s=o._resizeObserver;s&&(s.disconnect(),s.observe(n)),r.setProps({...t,styleDiffing:!1}),o.resize();const{initialViewState:d}=t;return d&&(d.bounds?o.fitBounds(d.bounds,{...d.fitBoundsOptions,duration:0}):r._updateViewState(d,!1)),o.isStyleLoaded()?o.fire("load"):o.once("styledata",()=>o.fire("load")),o._update(),r}_initialize(t){const{props:n}=this,{mapStyle:r=q}=n,o={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||je()||null,container:t,style:W(r)},i=o.initialViewState||o.viewState||o;if(Object.assign(o,{center:[i.longitude||0,i.latitude||0],zoom:i.zoom||0,pitch:i.pitch||0,bearing:i.bearing||0}),n.gl){const f=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=f,n.gl)}const s=new this._MapClass(o);i.padding&&s.setPadding(i.padding),n.cursor&&(s.getCanvas().style.cursor=n.cursor),this._createShadowTransform(s);const d=s._render;s._render=f=>{this._inRender=!0,d.call(s,f),this._inRender=!1};const u=s._renderTaskQueue.run;s._renderTaskQueue.run=f=>{u.call(s._renderTaskQueue,f),this._onBeforeRepaint()},s.on("render",()=>this._onAfterRepaint());const l=s.fire;s.fire=this._fireEvent.bind(this,l),s.on("resize",()=>{this._renderTransform.resize(s.transform.width,s.transform.height)}),s.on("styledata",()=>this._updateStyleComponents(this.props,{})),s.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const f in Y)s.on(f,this._onPointerEvent);for(const f in O)s.on(f,this._onCameraEvent);for(const f in G)s.on(f,this._onEvent);this._map=s}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),M.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_createShadowTransform(t){const n=ye(t.transform);t.painter.transform=n,this._renderTransform=n}_updateSize(t){const{viewState:n}=t;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(t,n){if(this._internalUpdate)return!1;const r=this._map,o=this._renderTransform,{zoom:i,pitch:s,bearing:d}=o,u=r.isMoving();u&&(o.cameraElevationReference="sea");const l=H(o,{...Z(r.transform),...t});if(u&&(o.cameraElevationReference="ground"),l&&n){const f=this._deferredEvents;f.move=!0,f.zoom||(f.zoom=i!==o.zoom),f.rotate||(f.rotate=d!==o.bearing),f.pitch||(f.pitch=s!==o.pitch)}return u||H(r.transform,t),l}_updateSettings(t,n){const r=this._map;let o=!1;for(const i of Ce)if(i in t&&!j(t[i],n[i])){o=!0;const s=r[`set${i[0].toUpperCase()}${i.slice(1)}`];s==null||s(t[i])}return o}_updateStyle(t,n){if(t.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==n.mapStyle){const{mapStyle:r=q,styleDiffing:o=!0}=t,i={diff:o};return"localIdeographFontFamily"in t&&(i.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(W(r),i),!0}return!1}_updateStyleComponents(t,n){const r=this._map;let o=!1;return r.isStyleLoaded()&&("light"in t&&r.setLight&&!j(t.light,n.light)&&(o=!0,r.setLight(t.light)),"fog"in t&&r.setFog&&!j(t.fog,n.fog)&&(o=!0,r.setFog(t.fog)),"terrain"in t&&r.setTerrain&&!j(t.terrain,n.terrain)&&(!t.terrain||r.getSource(t.terrain.source))&&(o=!0,r.setTerrain(t.terrain))),o}_updateHandlers(t,n){var r,o;const i=this._map;let s=!1;for(const d of Se){const u=(r=t[d])!==null&&r!==void 0?r:!0,l=(o=n[d])!==null&&o!==void 0?o:!0;j(u,l)||(s=!0,u?i[d].enable(u):i[d].disable())}return s}_queryRenderedFeatures(t){const n=this._map,{interactiveLayerIds:r=[]}=this.props;try{return n.queryRenderedFeatures(t,{layers:r.filter(n.getLayer.bind(n))})}catch{return[]}}_updateHover(t){var n;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const i=t.type,s=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,d=this._queryRenderedFeatures(t.point),u=d.length>0;!u&&s&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=d,u&&!s&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=i}else this._hoveredFeatures=null}_fireEvent(t,n,r){const o=this._map,i=o.transform,s=typeof n=="string"?n:n.type;return s==="move"&&this._updateViewState(this.props,!1),s in O&&(typeof n=="object"&&(n.viewState=Z(i)),this._map.isMoving())?(o.transform=this._renderTransform,t.call(o,n,r),o.transform=i,o):(t.call(o,n,r),o)}_onBeforeRepaint(){const t=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&t.fire(r);this._internalUpdate=!1;const n=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=n}}}M.savedMaps=[];function je(){let e=null;if(typeof location<"u"){const t=/access_token=([^&\/]*)/.exec(location.search);e=t&&t[1]}try{e=e||{}.MapboxAccessToken}catch{}try{e=e||{}.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return e}const Ee=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Te(e){if(!e)return null;const t=e.map,n={getMap:()=>t,getCenter:()=>e.transform.center,getZoom:()=>e.transform.zoom,getBearing:()=>e.transform.bearing,getPitch:()=>e.transform.pitch,getPadding:()=>e.transform.padding,getBounds:()=>e.transform.getBounds(),project:r=>{const o=t.transform;t.transform=e.transform;const i=t.project(r);return t.transform=o,i},unproject:r=>{const o=t.transform;t.transform=e.transform;const i=t.unproject(r);return t.transform=o,i},queryTerrainElevation:(r,o)=>{const i=t.transform;t.transform=e.transform;const s=t.queryTerrainElevation(r,o);return t.transform=i,s}};for(const r of Me(t))!(r in n)&&!Ee.includes(r)&&(n[r]=t[r].bind(t));return n}function Me(e){const t=new Set;let n=e;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof e[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&t.add(r);n=Object.getPrototypeOf(n)}return Array.from(t)}const we=typeof document<"u"?c.useLayoutEffect:c.useEffect,Le=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Ae(e,t){for(const r of Le)r in t&&(e[r]=t[r]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=t;n&&e.getRTLTextPluginStatus&&e.getRTLTextPluginStatus()==="unavailable"&&e.setRTLTextPlugin(n,r=>{r&&console.error(r)},!1)}const R=c.createContext(null);function Re(e,t,n){const r=c.useContext(xe),[o,i]=c.useState(null),s=c.useRef(),{current:d}=c.useRef({mapLib:null,map:null});c.useEffect(()=>{const f=e.mapLib;let h=!0,m;return Promise.resolve(f||n).then(_=>{if(!h)return;if(!_)throw new Error("Invalid mapLib");const x="Map"in _?_:_.default;if(!x.Map)throw new Error("Invalid mapLib");if(Ae(x,e),!x.supported||x.supported(e))e.reuseMaps&&(m=M.reuse(e,s.current)),m||(m=new M(x.Map,e,s.current)),d.map=Te(m),d.mapLib=x,i(m),r==null||r.onMapMount(d.map,e.id);else throw new Error("Map is not supported by this browser")}).catch(_=>{const{onError:x}=e;x?x({type:"error",target:null,originalEvent:null,error:_}):console.error(_)}),()=>{h=!1,m&&(r==null||r.onMapUnmount(e.id),e.reuseMaps?m.recycle():m.destroy())}},[]),we(()=>{o&&o.setProps(e)}),c.useImperativeHandle(t,()=>d.map,[o]);const u=c.useMemo(()=>({position:"relative",width:"100%",height:"100%",...e.style}),[e.style]),l={height:"100%"};return c.createElement("div",{id:e.id,ref:s,style:u},o&&c.createElement(R.Provider,{value:d},c.createElement("div",{"mapboxgl-children":"",style:l},e.children)))}const ke=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function T(e,t){if(!e||!t)return;const n=e.style;for(const r in t){const o=t[r];Number.isFinite(o)&&!ke.test(r)?n[r]=`${o}px`:n[r]=o}}function ze(e,t){const{map:n,mapLib:r}=c.useContext(R),o=c.useRef({props:e});o.current.props=e;const i=c.useMemo(()=>{let F=!1;c.Children.forEach(e.children,C=>{C&&(F=!0)});const ne={...e,element:F?document.createElement("div"):null},E=new r.Marker(ne);return E.setLngLat([e.longitude,e.latitude]),E.getElement().addEventListener("click",C=>{var y,g;(g=(y=o.current.props).onClick)===null||g===void 0||g.call(y,{type:"click",target:E,originalEvent:C})}),E.on("dragstart",C=>{var y,g;const S=C;S.lngLat=i.getLngLat(),(g=(y=o.current.props).onDragStart)===null||g===void 0||g.call(y,S)}),E.on("drag",C=>{var y,g;const S=C;S.lngLat=i.getLngLat(),(g=(y=o.current.props).onDrag)===null||g===void 0||g.call(y,S)}),E.on("dragend",C=>{var y,g;const S=C;S.lngLat=i.getLngLat(),(g=(y=o.current.props).onDragEnd)===null||g===void 0||g.call(y,S)}),E},[]);c.useEffect(()=>(i.addTo(n.getMap()),()=>{i.remove()}),[]);const{longitude:s,latitude:d,offset:u,style:l,draggable:f=!1,popup:h=null,rotation:m=0,rotationAlignment:_="auto",pitchAlignment:x="auto"}=e;return c.useEffect(()=>{T(i.getElement(),l)},[l]),c.useImperativeHandle(t,()=>i,[]),(i.getLngLat().lng!==s||i.getLngLat().lat!==d)&&i.setLngLat([s,d]),u&&!be(i.getOffset(),u)&&i.setOffset(u),i.isDraggable()!==f&&i.setDraggable(f),i.getRotation()!==m&&i.setRotation(m),i.getRotationAlignment()!==_&&i.setRotationAlignment(_),i.getPitchAlignment()!==x&&i.setPitchAlignment(x),i.getPopup()!==h&&i.setPopup(h),Q.createPortal(e.children,i.getElement())}const De=c.memo(c.forwardRef(ze));function K(e){return new Set(e?e.trim().split(/\s+/):[])}function Pe(e,t){const{map:n,mapLib:r}=c.useContext(R),o=c.useMemo(()=>document.createElement("div"),[]),i=c.useRef({props:e});i.current.props=e;const s=c.useMemo(()=>{const d={...e},u=new r.Popup(d);return u.setLngLat([e.longitude,e.latitude]),u.once("open",l=>{var f,h;(h=(f=i.current.props).onOpen)===null||h===void 0||h.call(f,l)}),u},[]);if(c.useEffect(()=>{const d=u=>{var l,f;(f=(l=i.current.props).onClose)===null||f===void 0||f.call(l,u)};return s.on("close",d),s.setDOMContent(o).addTo(n.getMap()),()=>{s.off("close",d),s.isOpen()&&s.remove()}},[]),c.useEffect(()=>{T(s.getElement(),e.style)},[e.style]),c.useImperativeHandle(t,()=>s,[]),s.isOpen()&&((s.getLngLat().lng!==e.longitude||s.getLngLat().lat!==e.latitude)&&s.setLngLat([e.longitude,e.latitude]),e.offset&&!j(s.options.offset,e.offset)&&s.setOffset(e.offset),(s.options.anchor!==e.anchor||s.options.maxWidth!==e.maxWidth)&&(s.options.anchor=e.anchor,s.setMaxWidth(e.maxWidth)),s.options.className!==e.className)){const d=K(s.options.className),u=K(e.className);for(const l of d)u.has(l)||s.removeClassName(l);for(const l of u)d.has(l)||s.addClassName(l);s.options.className=e.className}return Q.createPortal(e.children,o)}c.memo(c.forwardRef(Pe));function L(e,t,n,r){const o=c.useContext(R),i=c.useMemo(()=>e(o),[]);return c.useEffect(()=>{const s=r||n||t,d=typeof t=="function"&&typeof n=="function"?t:null,u=typeof n=="function"?n:typeof t=="function"?t:null,{map:l}=o;return l.hasControl(i)||(l.addControl(i,s==null?void 0:s.position),d&&d(o)),()=>{u&&u(o),l.hasControl(i)&&l.removeControl(i)}},[]),i}function Oe(e){const t=L(({mapLib:n})=>new n.AttributionControl(e),{position:e.position});return c.useEffect(()=>{T(t._container,e.style)},[e.style]),null}c.memo(Oe);function Ne(e){const t=L(({mapLib:n})=>new n.FullscreenControl({container:e.containerId&&document.getElementById(e.containerId)}),{position:e.position});return c.useEffect(()=>{T(t._controlContainer,e.style)},[e.style]),null}c.memo(Ne);function Ve(e,t){const n=c.useRef({props:e}),r=L(({mapLib:o})=>{const i=new o.GeolocateControl(e),s=i._setupUI;return i._setupUI=d=>{i._container.hasChildNodes()||s(d)},i.on("geolocate",d=>{var u,l;(l=(u=n.current.props).onGeolocate)===null||l===void 0||l.call(u,d)}),i.on("error",d=>{var u,l;(l=(u=n.current.props).onError)===null||l===void 0||l.call(u,d)}),i.on("outofmaxbounds",d=>{var u,l;(l=(u=n.current.props).onOutOfMaxBounds)===null||l===void 0||l.call(u,d)}),i.on("trackuserlocationstart",d=>{var u,l;(l=(u=n.current.props).onTrackUserLocationStart)===null||l===void 0||l.call(u,d)}),i.on("trackuserlocationend",d=>{var u,l;(l=(u=n.current.props).onTrackUserLocationEnd)===null||l===void 0||l.call(u,d)}),i},{position:e.position});return n.current.props=e,c.useImperativeHandle(t,()=>r,[]),c.useEffect(()=>{T(r._container,e.style)},[e.style]),null}c.memo(c.forwardRef(Ve));function Ie(e){const t=L(({mapLib:n})=>new n.NavigationControl(e),{position:e.position});return c.useEffect(()=>{T(t._container,e.style)},[e.style]),null}c.memo(Ie);function Fe(e){const t=L(({mapLib:i})=>new i.ScaleControl(e),{position:e.position}),n=c.useRef(e),r=n.current;n.current=e;const{style:o}=e;return e.maxWidth!==void 0&&e.maxWidth!==r.maxWidth&&(t.options.maxWidth=e.maxWidth),e.unit!==void 0&&e.unit!==r.unit&&t.setUnit(e.unit),c.useEffect(()=>{T(t._container,o)},[o]),null}c.memo(Fe);const Be=le(()=>import("./mapbox-gl-22a40bf3.js").then(e=>e.m),["assets/mapbox-gl-22a40bf3.js","assets/index-3a7c6a81.js","assets/index-d1daaa40.css"]),Ue=(()=>c.forwardRef(function(t,n){return Re(t,n,Be)}))(),Ze=De,A={latitude:40.74281576586265,longitude:-73.99277240443942,zoom:11},ee=e=>{const{onVehicleSelect:t,currentVehicleId:n,vehicles:r=[]}=e,o=ce(),i=c.useRef(null),[s]=c.useState(()=>{if(n){const l=r.find(f=>f.id===n);return l?{latitude:l.latitude,longitude:l.longitude,zoom:13}:A}else return A}),d=c.useCallback(()=>{const l=i.current;if(!l)return;let f;const h=r.find(m=>m.id===n);h?f={center:[h.longitude,h.latitude]}:f={center:[A.longitude,A.latitude]},l.flyTo(f)},[r,n]);c.useEffect(()=>{d()},[r,n]);const u=o.palette.mode==="dark"?"mapbox://styles/mapbox/dark-v9":"mapbox://styles/mapbox/light-v9";return B.apiKey?a.jsx(Ue,{attributionControl:!1,initialViewState:s,mapStyle:u,mapboxAccessToken:B.apiKey,ref:i,maxZoom:20,minZoom:11,children:r.map(l=>a.jsx(Ze,{latitude:l.latitude,longitude:l.longitude,onClick:()=>t==null?void 0:t(l.id),children:a.jsx(b,{sx:{height:50,width:50,...l.id===n&&{filter:f=>`drop-shadow(0px 0px 8px ${f.palette.primary.main})`},"& img":{height:"100%"}},children:a.jsx("img",{src:"/assets/car-marker.png"})})},l.id))}):a.jsxs(b,{sx:{alignItems:"center",display:"flex",flexDirection:"column",height:"100%",justifyContent:"center"},children:[a.jsx(b,{sx:{mb:3},children:a.jsx(b,{component:"img",src:"/assets/errors/error-404.png",sx:{width:200,maxWidth:"100%"}})}),a.jsx(v,{variant:"h5",sx:{mb:1},children:"Map cannot be loaded"}),a.jsx(v,{color:"text.secondary",variant:"subtitle2",children:"Mapbox API Key is not configured."})]})};ee.propTypes={currentVehicleId:p.string,onVehicleSelect:p.func,vehicles:p.array};const te=e=>{const{onDrawerOpen:t}=e;return a.jsx(b,{sx:{left:0,p:2,pointerEvents:"none",position:"absolute",top:0,width:"100%",zIndex:10},children:a.jsx(ve,{sx:{p:2,pointerEvents:"auto"},children:a.jsx($,{onClick:t,children:a.jsx(V,{children:a.jsx(de,{})})})})})};te.propTypes={onDrawerOpen:p.func};const He=()=>[{id:"VOL-653CD2",location:"New York, NY, USA",latitude:40.74759625348667,longitude:-74.00422032706065,temp:"8°C",startedAt:"Sep 01, 7:53 AM",departedAt:"Sep 01, 8:02 AM",arrivedAt:"Sep 01, 8:18 AM"},{id:"VOL-653CD3",location:"New York, NY, USA",latitude:40.75374208987527,longitude:-74.02878378307403,temp:"6°C",startedAt:"Sep 01, 8:21 AM",departedAt:"Sep 01, 8:36 AM",arrivedAt:"Sep 01, 9:54 AM"},{id:"VOL-653CD4",location:"New York, NY, USA",latitude:40.765281069832085,longitude:-73.96392724511145,temp:"8°C",startedAt:"Sep 01, 6:34 AM",departedAt:"Sep 01, 7:41 AM",arrivedAt:"Sep 01, 9:20 AM"}],Qe=()=>{var h;const e=c.useRef(null),t=ue(m=>m.breakpoints.up("md")),n=He(),[r,o]=c.useState(!1),[i,s]=c.useState((h=n[0])==null?void 0:h.id),d=c.useCallback(m=>{s(m)},[]),u=c.useCallback(()=>{s(void 0)},[]),l=c.useCallback(()=>{o(!0)},[]),f=c.useCallback(()=>{o(!1)},[]);return a.jsxs(a.Fragment,{children:[a.jsx(fe,{title:"Dashboard: Logistics Fleet"}),a.jsx(I,{}),a.jsxs(b,{component:"main",ref:e,sx:{display:"flex",flex:"1 1 auto",overflow:"hidden",position:"relative"},children:[t&&a.jsxs(b,{sx:{borderRightColor:"divider",borderRightStyle:"solid",borderRightWidth:1,flex:"0 0 400px"},children:[a.jsx(b,{sx:{p:2},children:a.jsx(v,{variant:"h5",children:"Fleet"})}),a.jsx(N,{currentVehicleId:i,onVehicleDeselect:u,onVehicleSelect:d,vehicles:n})]}),a.jsxs(b,{sx:{flex:"1 1 auto",overflow:"hidden",position:"relative"},children:[!t&&a.jsx(te,{onDrawerOpen:l}),a.jsx(ee,{currentVehicleId:i,onVehicleSelect:d,vehicles:n})]})]}),!t&&a.jsx(J,{container:e.current,onClose:f,open:r,children:a.jsx(N,{currentVehicleId:i,onVehicleDeselect:u,onVehicleSelect:d,vehicles:n})})]})};export{Qe as default};
